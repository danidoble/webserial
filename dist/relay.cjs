"use strict";var u=a=>{throw TypeError(a)};var d=(a,s,e)=>s.has(a)||u("Cannot "+e);var c=(a,s,e)=>(d(a,s,"read from private field"),e?e.call(a):s.get(a)),l=(a,s,e)=>s.has(a)?u("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(a):s.set(a,e);var h=(a,s,e)=>(d(a,s,"access private method"),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("./kernel-CtyQRsMI.cjs");var r,o,p;class f extends n.Kernel{constructor({filters:e=null,config_port:t=null,no_device:i=1}={}){super({filters:e,config_port:t,no_device:i});l(this,o);l(this,r,{activate:["A0","01","01","A2"],deactivate:["A0","01","00","A1"]});if(this.__internal__.device.type="relay",this.__internal__.auto_response=!0,n.c.getCustom(this.typeDevice,i))throw new Error(`Device ${this.typeDevice} ${i} already exists`);h(this,o,p).call(this)}serialMessage(e){const t={code:e,name:null,description:null,request:null,no_code:0};switch(e[1].toString()){case"dd":t.name="Connection with the serial device completed.",t.description="Your connection with the serial device was successfully completed.",t.request="connect",t.no_code=100;break;case"de":break;default:t.name="Unrecognized response",t.description="The response of application was received, but dont identify with any of current parameters",t.request="undefined",t.no_code=400;break}this.dispatch("serial:message",t)}serialRelaySumHex(e){let t=0;return e.forEach((i,y)=>{y!==3&&(t+=parseInt(i,16))}),t.toString(16).toUpperCase()}serialSetConnectionConstant(e=1){const t=["A0","01","00","A1"];return t[1]=this.hexMaker(this.decToHex(e.toString())),t[3]=this.serialRelaySumHex(t),this.add0x(t)}async turnOn(){const e=c(this,r).activate;e[3]=this.serialRelaySumHex(e),await this.appendToQueue(e,"relay:turn-on")}async turnOff(){const e=c(this,r).deactivate;e[3]=this.serialRelaySumHex(e),await this.appendToQueue(e,"relay:turn-off")}async toggle({inverse:e=!1,ms:t=300}={}){const i=this;e?(await i.turnOff(),await n.wait(t),await i.turnOn()):(await i.turnOn(),await n.wait(t),await i.turnOff())}}r=new WeakMap,o=new WeakSet,p=function(){n.c.add(this)};exports.Relay=f;
