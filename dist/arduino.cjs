"use strict";var c=t=>{throw TypeError(t)};var _=(t,s,n)=>s.has(t)||c("Cannot "+n);var d=(t,s,n)=>s.has(t)?c("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n);var l=(t,s,n)=>(_(t,s,"access private method"),n);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=require("./kernel-BTqvt4pt.cjs"),a=require("./relay-BsUsBpOv.cjs"),u=require("./webserial-core-DlH0cFSH.cjs");var r,h;class y extends p.Kernel{constructor({filters:n=null,config_port:o=null,no_device:i=1}={}){super({filters:n,config_port:o,no_device:i});d(this,r);if(this.__internal__.device.type="arduino",u.h.getCustom(this.typeDevice,i))throw new Error(`Device ${this.typeDevice} ${i} already exists`);this.__internal__.time.response_connection=2e3,this.__internal__.time.response_general=2e3,this.__internal__.serial.delay_first_connection=1e3,l(this,r,h).call(this),u.h.add(this),this.getResponseAsString()}serialMessage(n){const o=this.stringToArrayHex(n),i=this.stringToArrayBuffer(n),e={original_code:o,arrayBuffer:i,code:null,name:null,description:null,request:null,no_code:0};switch(e.code=n,n){case"connected":e.name="connected",e.description="Connection established",e.request="connect",e.no_code=100;break;case"created by danidoble":e.name="thanks",e.description="thanks for using this software",e.request="credits",e.no_code=101;break;case"hello there":e.name="hello there",e.description="hi human",e.request="hi",e.no_code=102;break;case"ara ara":e.name="ara ara",e.description="troll",e.request="ara ara",e.no_code=404;break;default:e.name="unknown",e.description="Unknown command",e.request="unknown",e.no_code=400;break}this.dispatch("serial:message",e)}serialSetConnectionConstant(n=1){return a.i.connection(n)}async sayCredits(){await this.appendToQueue(a.i.credits(),"credits")}async sayHi(){await this.appendToQueue(a.i.hi(),"hi")}async sayAra(){await this.appendToQueue(a.i.ara(),"ara")}async sendCustomCode({code:n=""}={}){if(typeof n!="string")throw new Error("Invalid string");await this.appendToQueue(this.parseStringToTextEncoder(n),"custom")}async doSomething(){await this.sayCredits(),await this.sayAra(),await this.sayHi()}}r=new WeakSet,h=function(){};exports.Arduino=y;
