(function(f,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(f=typeof globalThis<"u"?globalThis:f||self,u(f.Webserial={}))})(this,function(f){"use strict";var we=Object.defineProperty;var Z=f=>{throw TypeError(f)};var ve=(f,u,v)=>u in f?we(f,u,{enumerable:!0,configurable:!0,writable:!0,value:v}):f[u]=v;var A=(f,u,v)=>ve(f,typeof u!="symbol"?u+"":u,v),W=(f,u,v)=>u.has(f)||Z("Cannot "+v);var g=(f,u,v)=>(W(f,u,"read from private field"),v?v.call(f):u.get(f)),T=(f,u,v)=>u.has(f)?Z("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(f):u.set(f,v),V=(f,u,v,q)=>(W(f,u,"write to private field"),q?q.call(f,v):u.set(f,v),v),i=(f,u,v)=>(W(f,u,"access private method"),v);var y,H,ee,N,te,re,ne,ie,ae,se,le,oe,P,E,ce,O,k,D,a,ue,de,o,Q,m,_,R,ke,De,l,$,U;for(var u=[],v=0;v<256;++v)u.push((v+256).toString(16).slice(1));function q(b,s=0){return(u[b[s+0]]+u[b[s+1]]+u[b[s+2]]+u[b[s+3]]+"-"+u[b[s+4]]+u[b[s+5]]+"-"+u[b[s+6]]+u[b[s+7]]+"-"+u[b[s+8]]+u[b[s+9]]+"-"+u[b[s+10]]+u[b[s+11]]+u[b[s+12]]+u[b[s+13]]+u[b[s+14]]+u[b[s+15]]).toLowerCase()}var L,fe=new Uint8Array(16);function he(){if(!L&&(L=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!L))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return L(fe)}var pe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const z={randomUUID:pe};function _e(b,s,e){if(z.randomUUID&&!s&&!b)return z.randomUUID();b=b||{};var t=b.random||(b.rng||he)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,q(t)}class me extends EventTarget{dispatch(s,e=null){const t=new be(s,{detail:e});this.dispatchEvent(t)}on(s,e){this.addEventListener(s,e)}}class be extends CustomEvent{constructor(s,e){super(s,e)}}function J(b=100){return new Promise(s=>setTimeout(()=>s(),b))}function ye(){return"serial"in navigator}class B extends me{constructor({filters:e=null,config_port:t=null,no_device:n=1}={}){super();T(this,y);A(this,"__internal__",{device_number:1,aux_port_connector:0,serial:{connected:!1,port:null,reader:null,input_done:null,output_done:null,input_stream:null,output_stream:null,keep_reading:!0,incoming:new Uint8Array(0),time_until_send_bytes:void 0,bytes_connection:null,navigator_not_supported:"_id_vl_not_support",filters:[],btn_connect_serial:null,config_port:{baudRate:9600,dataBits:8,stopBits:1,parity:"none",bufferSize:32768,flowControl:"none"},queue:[]},device:{type:"unknown",id:_e()},time:{response_connection:500,response_general:2e3},timeout:{until_response:0},interval:{reconnection:0},wait_until_last_command_returns:void 0,time_to_reconnect:7e3,last_error:{message:null,handler:null,code:null,no_code:0}});e&&(this.serialFilters=e),t&&(this.serialConfigPort=t),n&&i(this,y,le).call(this,n),i(this,y,ae).call(this)}set serialFilters(e){this.__internal__.serial.filters=e}get serialFilters(){return this.__internal__.serial.filters}set serialConfigPort(e){this.__internal__.serial.config_port=e}get serialConfigPort(){return this.__internal__.serial.config_port}get isConnected(){return this.__internal__.serial.connected}get deviceNumber(){return this.__internal__.device_number}get uuid(){return this.__internal__.device.id}get typeDevice(){return this.__internal__.device.type}async timeout(e,t){this.__internal__.last_error.message="Operation response timed out.",this.__internal__.last_error.handler=t,this.__internal__.last_error.code=e,this.__internal__.timeout.until_response&&(clearTimeout(this.__internal__.timeout.until_response),this.__internal__.timeout.until_response=0),t==="connect"?(this.__internal__.serial.connected=!1,this.dispatch("serial:reconnect",{})):t==="connection:start"&&(await this.serialDisconnect(),this.__internal__.serial.connected=!1,this.__internal__.aux_port_connector+=1,await this.serialConnect()),this.dispatch("timeout",{...this.__internal__.last_error,bytes:e,action:t})}async disconnect(e=null){this.isConnected&&this.dispatch("serial:disconnected",e),await this.serialDisconnect(),this.__internal__.serial.connected=!1,this.__internal__.aux_port_connector=0}async connect(){return new Promise((e,t)=>{ye()||t("Web Serial not supported"),setTimeout(async()=>{await J(499),await this.serialConnect(),this.isConnected?e(`${this.typeDevice} device ${this.deviceNumber} connected`):t(`${this.typeDevice} device ${this.deviceNumber} not connected`)},1)})}async serialDisconnect(){try{const e=this.__internal__.serial.reader,t=this.__internal__.serial.output_stream;e&&(e.cancel().then(()=>{}).catch(c=>this.serialErrors(c)),await this.__internal__.serial.input_done,this.__internal__.serial.reader=null,this.__internal__.serial.input_done=null),t&&(await t.getWriter().close(),await this.__internal__.serial.output_done,this.__internal__.serial.output_stream=null,this.__internal__.serial.output_done=null),this.__internal__.serial.connected&&this.__internal__.serial.port.close(),this.__internal__.serial.connected=!1,this.__internal__.serial.port=null}catch(e){this.serialErrors(e)}}async serialPortsSaved(e){const t=this.serialFilters;if(this.__internal__.aux_port_connector<e.length){const n=this.__internal__.aux_port_connector;this.__internal__.serial.port=e[n]}else this.__internal__.aux_port_connector=0,this.__internal__.serial.port=await navigator.serial.requestPort({filters:t});if(!this.__internal__.serial.port)throw new Error("Select another port please")}serialErrors(e){const t=e.toString().toLowerCase();switch(!0){case t.includes("must be handling a user gesture to show a permission request"):case t.includes("the port is closed."):case t.includes("select another port please"):case t.includes("no port selected by the user"):case t.includes("this readable stream reader has been released and cannot be used to cancel its previous owner stream"):break;case t.includes("the port is already open."):this.serialDisconnect.then(async()=>{this.__internal__.aux_port_connector+=1,await this.serialConnect()});break;case t.includes("cannot read properties of undefined (reading 'writable')"):case t.includes("cannot read properties of null (reading 'writable')"):case t.includes("cannot read property 'writable' of null"):case t.includes("cannot read property 'writable' of undefined"):case t.includes("failed to open serial port"):this.serialDisconnect.then(async()=>{await this.serialConnect()});break;case t.includes("failed to execute 'open' on 'serialport': a call to open() is already in progress."):break;case t.includes("the device has been lost"):break;case t.includes("navigator.serial is undefined"):break}}async serialConnect(){try{const e=await i(this,y,te).call(this);if(e.length>0)await this.serialPortsSaved(e);else{const c=this.serialFilters;this.__internal__.serial.port=await navigator.serial.requestPort({filters:c})}const t=this.__internal__.serial.port;await t.open(this.serialConfigPort);const n=this;t.onconnect=c=>{n.dispatch("serial:connected",c.detail),n.__internal__.serial.queue.length>0&&n.dispatch("internal:queue",{})},t.ondisconnect=async c=>{await n.disconnect(c.detail??null)},this.dispatch("serial:connecting",t.getInfo()),this.__internal__.timeout.until_response=setTimeout(async()=>{await n.timeout(n.__internal__.serial.bytes_connection,"connection:start")},this.__internal__.time.response_connection),await i(this,y,H).call(this,this.__internal__.serial.bytes_connection),this.typeDevice==="relay"&&i(this,y,N).call(this,["DD","DD"],null),await i(this,y,ne).call(this)}catch(e){this.serialErrors(e)}}async serialForget(){return await i(this,y,ie).call(this)}decToHex(e){return parseInt(e,10).toString(16)}hexToDec(e){return parseInt(e,16).toString(10)}hexMaker(e,t=2){e===void 0&&(e="00");let n=t-e.toString().length;if(n>0)for(let c=0;c<n;c++)e="0"+e;return e.toString().toUpperCase()}add0x(e){let t=[];return e.forEach((n,c)=>{t[c]="0x"+n}),t}bytesToHex(e){return this.add0x(Array.from(e,t=>this.hexMaker(t)))}async appendToQueue(e,t){const n=this.bytesToHex(e);if(["connect","connection:start"].includes(t)){if(this.__internal__.serial.connected)return;await this.serialConnect();return}this.__internal__.serial.queue.push({bytes:n,action:t}),this.dispatch("internal:queue",{})}serialSetConnectionConstant(e=1){}serialMessage(e){}serialCorruptMessage(e,t){}__emulate(e){if(typeof e.code!="object"){console.error("Invalid data to make an emulation");return}this.__internal__.serial.connected||(this.__internal__.serial.connected=!0,this.__internal__.interval.reconnection&&(clearInterval(this.__internal__.interval.reconnection),this.__internal__.interval.reconnection=0)),this.__internal__.timeout.until_response&&(clearTimeout(this.__internal__.timeout.until_response),this.__internal__.timeout.until_response=0),this.serialMessage(e.code)}toString(){return JSON.stringify({__class:this.typeDevice,device_number:this.deviceNumber,uuid:this.uuid,connected:this.isConnected,connection:this.__internal__.serial.bytes_connection})}softReload(){i(this,y,oe).call(this),this.dispatch("serial:soft-reload",{})}async sendConnect(){await this.appendToQueue(this.__internal__.serial.bytes_connection,"connect")}async sendCustomCode(e){await this.appendToQueue(e,"custom")}}y=new WeakSet,H=async function(e){const t=this.__internal__.serial.port;if(!t)throw new Error("The port is closed.");const n=new Uint8Array(e),c=t.writable.getWriter();await c.write(n),c.releaseLock()},ee=function(e=[]){return e.map(t=>t.toString().toLowerCase())},N=function(e=[],t=null){e&&e.length>0?(this.__internal__.serial.connected=!0,this.__internal__.interval.reconnection&&(clearInterval(this.__internal__.interval.reconnection),this.__internal__.interval.reconnection=0),this.__internal__.timeout.until_response&&(clearTimeout(this.__internal__.timeout.until_response),this.__internal__.timeout.until_response=0),this.serialMessage(i(this,y,ee).call(this,e))):this.serialCorruptMessage(e,t),this.__internal__.serial.queue.length!==0&&this.dispatch("internal:queue",{})},te=async function(){const e=this.serialFilters;return(await navigator.serial.getPorts({filters:e})).filter(n=>{const c=n.getInfo();return e.some(h=>c.usbProductId===h.usbProductId&&c.usbVendorId===h.usbVendorId)})},re=function(e){if(e!==void 0){const t=this.__internal__.serial.incoming;let n=new Uint8Array(t.length+e.byteLength);n.set(t,0),n.set(new Uint8Array(e),t.length),this.__internal__.serial.incoming=n}},ne=async function(){const e=this.__internal__.serial.port;for(;e.readable&&this.__internal__.serial.keep_reading;){const t=e.readable.getReader();this.__internal__.serial.reader=t;try{let n=!0;for(;n;){const{value:c,done:h}=await t.read();if(h){t.releaseLock(),this.__internal__.serial.keep_reading=!1,n=!1;break}i(this,y,re).call(this,c),this.__internal__.serial.time_until_send_bytes&&(clearTimeout(this.__internal__.serial.time_until_send_bytes),this.__internal__.serial.time_until_send_bytes=0),this.__internal__.serial.time_until_send_bytes=setTimeout(()=>{let p=[];for(const d in this.__internal__.serial.incoming)p.push(this.__internal__.serial.incoming[d].toString(16));this.__internal__.serial.incoming&&i(this,y,N).call(this,p),this.__internal__.serial.incoming=new Uint8Array(0)},400)}}catch(n){this.serialErrors(n)}finally{t.releaseLock()}}this.__internal__.serial.keep_reading=!0,await this.__internal__.serial.port.close()},ie=async function(){return typeof window>"u"?!1:"serial"in navigator&&"forget"in window.SerialPort.prototype?(await this.__internal__.serial.port.forget(),!0):!1},ae=function(){this.on("internal:queue",async()=>{await i(this,y,se).call(this)})},se=async function(){if(!this.__internal__.serial.connected){await this.serialConnect();return}if(this.__internal__.timeout.until_response||this.__internal__.serial.queue.length===0)return;const e=this.__internal__.serial.queue[0];this.__internal__.timeout.until_response=setTimeout(async()=>{await this.timeout(e.bytes,e.action)},this.__internal__.time.response_general),this.dispatch("serial:sent",{action:e.action,bytes:e.bytes}),await i(this,y,H).call(this,e.bytes),this.typeDevice==="relay"&&i(this,y,N).call(this,["DD","DD"],null);const t=[...this.__internal__.serial.queue];this.__internal__.serial.queue=t.splice(1)},le=function(e=1){this.__internal__.device_number=e,this.__internal__.serial.bytes_connection=this.serialSetConnectionConstant(e)},oe=function(){this.__internal__.last_error={message:null,handler:null,code:null,no_code:0}};const w=class w{static typeError(s){const e=new Error;throw e.message=`Type ${s} is not supported`,e.name="DeviceTypeError",e}static add(s){const e=s.typeDevice,t=s.uuid;if(typeof w.devices[e]>"u")return w.typeError(e);if(!w.devices[e][t])return w.devices[e][t]=s,w.devices[e].indexOf(s)}static get(s,e){return typeof w.devices[s]>"u"?w.typeError(s):w.devices[s][e]}static getJofemarByUuid(s){return w.get("jofemar",s)}static getLockerByUuid(s){return w.get("locker",s)}static getRelayByUuid(s){return w.get("relay",s)}static getBoardroidByUuid(s){return w.get("boardroid",s)}static getAll(s=null){return s===null?w.devices:typeof w.devices[s]>"u"?w.typeError(s):w.devices[s]}static getJofemar(s=1){return w.devices.jofemar.find(e=>e.deviceNumber===s)}static getBoardroid(s=1){return w.devices.boardroid.find(e=>e.deviceNumber===s)}static getLocker(s=1){return w.devices.locker.find(e=>e.deviceNumber===s)}static getRelay(s=1){return w.devices.relay.find(e=>e.deviceNumber===s)}};A(w,"devices",{relay:[],locker:[],jofemar:[],boardroid:[]});let I=w;class G extends B{constructor({filters:e=null,config_port:t=null,no_device:n=1}={}){super({filters:e,config_port:t,no_device:n});T(this,E);T(this,P,{activate:["A0","01","01","A2"],deactivate:["A0","01","00","A1"]});this.__internal__.device.type="relay",i(this,E,ce).call(this)}serialMessage(e){const t={code:e,name:null,description:null,request:null,no_code:0};switch(e[1].toString()){case"dd":t.name="Connection with the serial device completed.",t.description="Your connection with the serial device was successfully completed.",t.request="connect",t.no_code=100;break;case"de":break;default:t.name="Unrecognized response",t.description="The response of application was received, but dont identify with any of current parameters",t.request="undefined",t.no_code=400;break}this.dispatch("serialMessage",t)}serialSetConnectionConstant(e=1){const t=["A0","01","00","A1"];return t[1]=this.hexMaker(this.decToHex(e.toString())),t[3]=i(this,E,O).call(this,t),this.add0x(t)}async turnOn(){const e=g(this,P).activate;e[3]=i(this,E,O).call(this,e),await this.appendToQueue(e,"relay:turn-on")}async turnOff(){const e=g(this,P).deactivate;e[3]=i(this,E,O).call(this,e),await this.appendToQueue(e,"relay:turn-off")}async toggle(e=!1,t=300){const n=this;e?(await n.turnOff(),await J(t),await n.turnOn()):(await n.turnOn(),await J(t),await n.turnOff())}}P=new WeakMap,E=new WeakSet,ce=function(){I.add(this)},O=function(e){let t=0;return e.forEach((n,c)=>{c!==3&&(t+=parseInt(n,16))}),t.toString(16).toUpperCase()};class Y extends B{constructor(){super()}}class K extends B{constructor(){super()}}class X extends B{constructor(){super();A(this,"_recycler",{ict:!0,bill:1})}}const r=class r{static status(s=null){var t,n;if(!i(t=r,a,o).call(t,s))return!1;let e=[];switch(g(r,k)){case"locker":e=["0","8"];break;case"boardroid":e=["2",(5+g(r,D)).toString(16).toUpperCase()];break;case"jofemar":e=["6"];break;default:return!1}i(n=r,a,l).call(n,e)}static dispensed(s=null){var t,n;if(!i(t=r,a,o).call(t,s))return!1;let e=[];switch(g(r,k)){case"locker":e=["0","7","4","4","4"];break;case"boardroid":e=["2","D7","A","0","0","0","0","0","0","0","0","0","F2"];break;case"jofemar":e=["6","30"];break;default:return!1}i(n=r,a,l).call(n,e)}static notDispensed(s=null){var t,n;if(!i(t=r,a,o).call(t,s))return!1;let e=[];switch(g(r,k)){case"locker":e=["0","7","5","5","5"];break;case"boardroid":e=["2","D7","A","0","0","1","0","0","0","0","0","0","F2"];break;case"jofemar":e=["6","34"];break;default:return!1}i(n=r,a,l).call(n,e)}static gateInactive(s=null){var e;if(!i(e=r,a,o).call(e,s)||!i(this,a,Q).call(this))return!1;i(this,a,l).call(this,["0","7","5","5","5"])}static gateConfigured(s=null){var e;if(!i(e=r,a,o).call(e,s)||!i(this,a,Q).call(this))return!1;i(this,a,l).call(this,["0","6"])}static keyPressed(s=null){var c,h,p;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,_).call(h))return!1;const e=["30","31","32","33","34","35","36","37","38","39","2A","23","41","42","43","44"],t=(128+g(r,D)).toString(16),n=Math.floor(Math.random()*15);i(p=r,a,l).call(p,["2",t,"54",e[n]])}static doorOpened(s=null){var n,c;if(!i(n=r,a,o).call(n,s)||!i(this,a,R).call(this))return!1;let e=[];const t=(128+g(r,D)).toString(16);switch(g(r,k)){case"boardroid":e=["2","D8","dc"];break;case"jofemar":e=["2",t,"50","4F"];break}i(c=r,a,l).call(c,e)}static doorClosed(s=null){var n,c;if(!i(n=r,a,o).call(n,s)||!i(this,a,R).call(this))return!1;let e=[];const t=(128+g(r,D)).toString(16);switch(g(r,k)){case"boardroid":e=["2","D8","db"];break;case"jofemar":e=["2",t,"50","43"];break}i(c=r,a,l).call(c,e)}static channelDisconnected(s=null){var t,n,c;if(!i(t=r,a,o).call(t,s)||!i(n=r,a,_).call(n))return!1;const e=(128+g(r,D)).toString(16);i(c=r,a,l).call(c,["2",e,"43","43","43","FD"])}static channelConnected(s=null){var t,n,c;if(!i(t=r,a,o).call(t,s)||!i(n=r,a,_).call(n))return!1;const e=(128+g(r,D)).toString(16);i(c=r,a,l).call(c,["2",e,"43","43","43","FC"])}static channelEmpty(s=null){var t,n,c;if(!i(t=r,a,o).call(t,s)||!i(n=r,a,_).call(n))return!1;const e=(128+g(r,D)).toString(16);i(c=r,a,l).call(c,["2",e,"43","43","43","FF"])}static workingTemperature(s=null){var t,n,c;if(!i(t=r,a,o).call(t,s)||!i(n=r,a,_).call(n))return!1;const e=(128+g(r,D)).toString(16);i(c=r,a,l).call(c,["2",e,"43","54","16"])}static currentTemperature(s=null){var n,c,h;if(!i(n=r,a,o).call(n,s)||!i(c=r,a,R).call(c))return!1;let e=[];const t=(128+g(r,D)).toString(16);switch(g(r,k)){case"boardroid":e=["2","D9","44","30"];break;case"jofemar":e=["2",t,"43","74","2B","30","39","2E","31","7F","43"];break}i(h=r,a,l).call(h,e)}static ready(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","30"])}static busy(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","31"])}static invalidTray(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","32"])}static invalidChannel(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","33"])}static emptyChannel(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","34"])}static elevatorJam(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","35"])}static elevatorMalfunction(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","36"])}static phototransistorFailure(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","37"])}static allChannelsEmpty(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","38"])}static productDetectorFailure(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","39"])}static displayDisconnected(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","41"])}static productUnderElevator(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","42"])}static elevatorSettingAlarm(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","43"])}static buttonPanelFailure(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","44"])}static errorWritingEeprom(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","45"])}static errorControlTemperature(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","46"])}static thermometerDisconnected(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","47"])}static thermometerMisconfigured(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","48"])}static thermometerFailure(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","49"])}static errorExtractorConsumption(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4A"])}static channelSearchError(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4B"])}static productExitMouthSearchError(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4C"])}static elevatorInteriorLocked(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4D"])}static productDetectorVerifierError(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4E"])}static waitingForProductRecall(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4F"])}static productExpiredByTemperature(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","50"])}static faultyAutomaticDoor(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","51"])}static rejectLever(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","A0","1"])}static resetCoinPurse(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","A0","2"])}static coinInsertedBox(s=null,e=null){var c,h,p,d;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,m).call(h))return!1;const t=["40","41","42","43","44","45"],n=i(p=r,a,$).call(p,t,e);i(d=r,a,l).call(d,["2","A0",n])}static coinInsertedTube(s=null,e=null){var c,h,p,d;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,m).call(h))return!1;const t=["50","51","52","53","54","55"],n=i(p=r,a,$).call(p,t,e);i(d=r,a,l).call(d,["2","A0",n])}static banknoteInsertedStacker(s=null,e=null){var c,h,p,d;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,m).call(h))return!1;const t=["80","81","82","83","84"],n=i(p=r,a,U).call(p,t,e);i(d=r,a,l).call(d,["2","B0",n])}static banknoteInsertedEscrow(s=null,e=null){var c,h,p,d;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,m).call(h))return!1;const t=["90","91","92","93","94"],n=i(p=r,a,U).call(p,t,e);i(d=r,a,l).call(d,["2","B0",n])}static banknoteEjected(s=null,e=null){var c,h,p,d;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,m).call(h))return!1;const t=["A0","A1","A2","A3","A4"],n=i(p=r,a,U).call(p,t,e);i(d=r,a,l).call(d,["2","B0",n])}static banknoteInsertedRecycler(s=null,e=null){var c,h,p,d;if(!i(c=r,a,o).call(c,s)||!i(h=r,a,m).call(h))return!1;const t=["B0","B1","B2","B3","B4"],n=i(p=r,a,U).call(p,t,e);i(d=r,a,l).call(d,["2","B0",n])}static banknoteTaken(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","B0","2a"])}static coinPurseEnabled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D0","1"])}static coinPurseDisabled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D0","0"])}static billPurseDisabled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D1","0","0"])}static billPurseEnabled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D1","1","1"])}static readTubes(s=null){var M,C,S;if(!i(M=r,a,o).call(M,s)||!i(C=r,a,m).call(C))return!1;const e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f"],[t,n,c,h,p,d]=[e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)]];i(S=r,a,l).call(S,["2","D2",t,n,c,h,p,d])}static readBillPurse(s=null,e=null){var n,c,h,p;if(!i(n=r,a,o).call(n,s)||!i(c=r,a,m).call(c))return!1;let t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c"];if(s._recycler.ict){const d=t[Math.floor(Math.random()*31)];let M="0",C="0",S="0",x="0",F="0";if(e!==null&&!isNaN(parseInt(e)))switch(e.toString()){case"20":M=d;break;case"50":C=d;break;case"100":S=d;break;case"200":x=d;break;case"500":F=d;break}else switch(s._recycler.bill){case 0:M=d;break;case 1:C=d;break;case 2:S=d;break;case 3:x=d;break;case 4:F=d;break}i(h=r,a,l).call(h,["2","D3",M,C,S,x,F,"0"])}else{const[d,M,C,S,x,F]=[t[Math.floor(Math.random()*30)],t[Math.floor(Math.random()*30)],t[Math.floor(Math.random()*30)],t[Math.floor(Math.random()*2)],t[Math.floor(Math.random())],t[Math.floor(Math.random())]];i(p=r,a,l).call(p,["2","D3",d,M,C,S,x,F])}}static banknoteAccepted(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D4","1"])}static banknoteRejected(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D4","0"])}static banknotesDispensed(s=null){var t,n,c,h;if(!i(t=r,a,o).call(t,s)||!i(n=r,a,m).call(n))return!1;let e=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c"];if(s._recycler.ict){const p=e[Math.floor(Math.random()*30)];let d="0",M="0",C="0",S="0",x="0";switch(s._recycler.bill){case 0:d=p;break;case 1:M=p;break;case 2:C=p;break;case 3:S=p;break;case 4:x=p;break}i(c=r,a,l).call(c,["2","D5",d,M,C,S,x,"0"])}else{const[p,d,M,C,S,x]=[e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*2)],e[Math.floor(Math.random())],e[Math.floor(Math.random())]];i(h=r,a,l).call(h,["2","D5",p,d,M,C,S,x])}}static coinsDispensed(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","D6"])}static relayOn(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DA","1"])}static relayOff(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DA","0"])}static nayaxEnabled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","1"])}static nayaxDisabled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","0"])}static nayaxPreCreditAuthorized(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","3"])}static nayaxCancelRequest(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","4"])}static nayaxSellApproved(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","5"])}static nayaxSellDenied(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","6"])}static nayaxEndSession(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","7"])}static nayaxCancelled(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","8"])}static nayaxDispensed(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","A","0"])}static nayaxNotDispensed(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,m).call(t))return!1;i(n=r,a,l).call(n,["2","DD","A","1"])}static fullTray(s=null){var e,t,n;if(!i(e=r,a,o).call(e,s)||!i(t=r,a,_).call(t))return!1;i(n=r,a,l).call(n,["6","4F"])}};k=new WeakMap,D=new WeakMap,a=new WeakSet,ue=function(){if(r.enable===!1)throw new Error("Emulator is disabled");return r.enable},de=function(s){if(typeof s!="object"||!(s instanceof B))throw new Error(`Type ${s.typeDevice} is not supported`);return r.instance=s,V(r,k,s.typeDevice),V(r,D,s.deviceNumber),!0},o=function(s=null){var e,t;return!i(e=r,a,ue).call(e)||s===null&&r.instance===null?!1:(r.instance===null&&i(t=r,a,de).call(t,s),!0)},Q=function(){if(g(r,k)!=="locker")throw new Error("This function is only available for Locker devices");return!0},m=function(){if(g(r,k)!=="boardroid")throw new Error("This function is only available for Boardroid devices");return!0},_=function(){if(g(r,k)!=="boardroid")throw new Error("This function is only available for Jofemar devices");return!0},R=function(){if(g(r,k)==="locker")throw new Error("This function is not available for Locker devices");return!0},ke=function(){if(g(r,k)==="boardroid")throw new Error("This function is not available for Boardroid devices");return!0},De=function(){if(g(r,k)==="jofemar")throw new Error("This function is not available for Jofemar devices");return!0},l=function(s){r.instance.__emulate({code:s})},$=function(s,e=null){let t=s[Math.floor(Math.random()*5)];if(e!==null&&!isNaN(parseFloat(e)))switch(e.toString()){case"0.5":t=s[1];break;case"1":t=s[2];break;case"2":t=s[3];break;case"5":t=s[4];break;case"10":t=s[5];break}return t},U=function(s,e=null){let t=s[Math.floor(Math.random()*4)];if(e!==null&&!isNaN(parseFloat(e)))switch(e.toString()){case"20":t=s[0];break;case"50":t=s[1];break;case"100":t=s[2];break;case"200":t=s[3];break;case"500":t=s[4];break}return t},T(r,a),A(r,"enable",!1),A(r,"instance",null),T(r,k,null),T(r,D,1);let j=r;const ge={Relay:G,Locker:Y,Jofemar:K,Boardroid:X,Devices:I,Emulator:j,version:"3.0.0"};f.Boardroid=X,f.Devices=I,f.Emulator=j,f.Jofemar=K,f.Locker=Y,f.Relay=G,f.Webserial=ge,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
