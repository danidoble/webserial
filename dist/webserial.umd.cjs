(function(h,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(h=typeof globalThis<"u"?globalThis:h||self,u(h.Webserial={}))})(this,function(h){"use strict";var Ae=Object.defineProperty;var ne=h=>{throw TypeError(h)};var Fe=(h,u,w)=>u in h?Ae(h,u,{enumerable:!0,configurable:!0,writable:!0,value:w}):h[u]=w;var B=(h,u,w)=>Fe(h,typeof u!="symbol"?u+"":u,w),z=(h,u,w)=>u.has(h)||ne("Cannot "+w);var y=(h,u,w)=>(z(h,u,"read from private field"),w?w.call(h):u.get(h)),C=(h,u,w)=>u.has(h)?ne("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(h):u.set(h,w),I=(h,u,w,L)=>(z(h,u,"write to private field"),L?L.call(h,w):u.set(h,w),w),i=(h,u,w)=>(z(h,u,"access private method"),w);var g,Y,ie,W,se,ae,le,oe,ce,ue,de,he,fe,U,H,_e,T,F,J,pe,q,me,be,V,ye,k,D,a,ge,ve,c,G,m,p,Q,Be,Ie,o,K,j;for(var u=[],w=0;w<256;++w)u.push((w+256).toString(16).slice(1));function L(b,s=0){return(u[b[s+0]]+u[b[s+1]]+u[b[s+2]]+u[b[s+3]]+"-"+u[b[s+4]]+u[b[s+5]]+"-"+u[b[s+6]]+u[b[s+7]]+"-"+u[b[s+8]]+u[b[s+9]]+"-"+u[b[s+10]]+u[b[s+11]]+u[b[s+12]]+u[b[s+13]]+u[b[s+14]]+u[b[s+15]]).toLowerCase()}var O,we=new Uint8Array(16);function ke(){if(!O&&(O=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(we)}var De=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const X={randomUUID:De};function Se(b,s,e){if(X.randomUUID&&!s&&!b)return X.randomUUID();b=b||{};var t=b.random||(b.rng||ke)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,L(t)}class xe extends EventTarget{constructor(){super(...arguments);B(this,"__listeners__",{})}dispatch(e,t=null){const r=new Me(e,{detail:t});this.dispatchEvent(r)}on(e,t){typeof this.__listeners__[e]<"u"&&this.__listeners__[e]===!1&&(this.__listeners__[e]=!0),this.addEventListener(e,t)}serialRegisterAvailableListener(e){this.__listeners__[e]||(this.__listeners__[e]=!1)}get availableListeners(){return Object.keys(this.__listeners__).map(e=>({type:e,listening:this.__listeners__[e]}))}}class Me extends CustomEvent{constructor(s,e){super(s,e)}}function $(b=100){return new Promise(s=>setTimeout(()=>s(),b))}function Ce(){return"serial"in navigator}class P extends xe{constructor({filters:e=null,config_port:t=null,no_device:r=1}={}){super();C(this,g);B(this,"__internal__",{device_number:1,aux_port_connector:0,serial:{connected:!1,port:null,reader:null,input_done:null,output_done:null,input_stream:null,output_stream:null,keep_reading:!0,incoming:new Uint8Array(0),time_until_send_bytes:void 0,bytes_connection:null,navigator_not_supported:"_id_vl_not_support",filters:[],btn_connect_serial:null,config_port:{baudRate:9600,dataBits:8,stopBits:1,parity:"none",bufferSize:32768,flowControl:"none"},queue:[]},device:{type:"unknown",id:Se()},time:{response_connection:500,response_general:2e3},timeout:{until_response:0},interval:{reconnection:0},dispense:{status:!1},wait_until_last_command_returns:void 0,time_to_reconnect:7e3,last_error:{message:null,handler:null,code:null,no_code:0}});e&&(this.serialFilters=e),t&&(this.serialConfigPort=t),r&&i(this,g,he).call(this,r),i(this,g,ce).call(this),i(this,g,ue).call(this)}set serialFilters(e){this.__internal__.serial.filters=e}get serialFilters(){return this.__internal__.serial.filters}set serialConfigPort(e){this.__internal__.serial.config_port=e}get serialConfigPort(){return this.__internal__.serial.config_port}get isConnected(){return this.__internal__.serial.connected}get deviceNumber(){return this.__internal__.device_number}get uuid(){return this.__internal__.device.id}get typeDevice(){return this.__internal__.device.type}get queue(){return this.__internal__.serial.queue}async timeout(e,t){console.log("se acabo el tiempo"),this.__internal__.last_error.message="Operation response timed out.",this.__internal__.last_error.handler=t,this.__internal__.last_error.code=e,this.__internal__.timeout.until_response&&(clearTimeout(this.__internal__.timeout.until_response),this.__internal__.timeout.until_response=0),t==="connect"?(this.__internal__.serial.connected=!1,this.dispatch("serial:reconnect",{})):t==="connection:start"&&(await this.serialDisconnect(),this.__internal__.serial.connected=!1,this.__internal__.aux_port_connector+=1,await this.serialConnect()),this.dispatch("serial:timeout",{...this.__internal__.last_error,bytes:e,action:t})}async disconnect(e=null){await this.serialDisconnect(),this.__internal__.serial.connected=!1,this.__internal__.aux_port_connector=0,this.dispatch("serial:disconnected",e)}async connect(){return new Promise((e,t)=>{Ce()||t("Web Serial not supported"),setTimeout(async()=>{await $(499),await this.serialConnect(),this.isConnected?e(`${this.typeDevice} device ${this.deviceNumber} connected`):t(`${this.typeDevice} device ${this.deviceNumber} not connected`)},1)})}async serialDisconnect(){try{const e=this.__internal__.serial.reader,t=this.__internal__.serial.output_stream;e&&(await e.cancel().catch(l=>this.serialErrors(l)),await this.__internal__.serial.input_done),t&&(await t.getWriter().close(),await this.__internal__.serial.output_done),this.__internal__.serial.connected&&this.__internal__.serial&&await this.__internal__.serial.port.close()}catch(e){this.serialErrors(e)}finally{this.__internal__.serial.reader=null,this.__internal__.serial.input_done=null,this.__internal__.serial.output_stream=null,this.__internal__.serial.output_done=null,this.__internal__.serial.connected=!1,this.__internal__.serial.port=null}}async serialPortsSaved(e){const t=this.serialFilters;if(this.__internal__.aux_port_connector<e.length){const r=this.__internal__.aux_port_connector;this.__internal__.serial.port=e[r]}else this.__internal__.aux_port_connector=0,this.__internal__.serial.port=await navigator.serial.requestPort({filters:t});if(!this.__internal__.serial.port)throw new Error("Select another port please")}serialErrors(e){const t=e.toString().toLowerCase();switch(!0){case t.includes("must be handling a user gesture to show a permission request"):case t.includes("the port is closed."):case t.includes("select another port please"):case t.includes("no port selected by the user"):case t.includes("this readable stream reader has been released and cannot be used to cancel its previous owner stream"):break;case t.includes("the port is already open."):this.serialDisconnect().then(async()=>{this.__internal__.aux_port_connector+=1,await this.serialConnect()});break;case t.includes("cannot read properties of undefined (reading 'writable')"):case t.includes("cannot read properties of null (reading 'writable')"):case t.includes("cannot read property 'writable' of null"):case t.includes("cannot read property 'writable' of undefined"):case t.includes("failed to open serial port"):this.serialDisconnect().then(async()=>{await this.serialConnect()});break;case t.includes("'close' on 'serialport': a call to close() is already in progress."):break;case t.includes("failed to execute 'open' on 'serialport': a call to open() is already in progress."):break;case t.includes("the device has been lost"):break;case t.includes("the port is already closed."):break;case t.includes("navigator.serial is undefined"):break;default:console.error(e);break}}async serialConnect(){try{const e=await i(this,g,se).call(this);if(e.length>0)await this.serialPortsSaved(e);else{const l=this.serialFilters;this.__internal__.serial.port=await navigator.serial.requestPort({filters:l})}const t=this.__internal__.serial.port;await t.open(this.serialConfigPort);const r=this;t.onconnect=l=>{r.dispatch("serial:connected",l.detail),r.__internal__.serial.queue.length>0&&r.dispatch("internal:queue",{})},t.ondisconnect=async l=>{await r.disconnect(l.detail??null)},this.__internal__.timeout.until_response=setTimeout(async()=>{await r.timeout(r.__internal__.serial.bytes_connection,"connection:start")},this.__internal__.time.response_connection),this.dispatch("serial:connecting",t.getInfo()),await i(this,g,Y).call(this,this.__internal__.serial.bytes_connection),this.typeDevice==="relay"&&i(this,g,W).call(this,["DD","DD"],null),await i(this,g,le).call(this)}catch(e){this.serialErrors(e)}}async serialForget(){return await i(this,g,oe).call(this)}decToHex(e){return parseInt(e,10).toString(16)}hexToDec(e){return parseInt(e,16).toString(10)}hexMaker(e,t=2){e===void 0&&(e="00");let r=t-e.toString().length;if(r>0)for(let l=0;l<r;l++)e="0"+e;return e.toString().toUpperCase()}add0x(e){let t=[];return e.forEach((r,l)=>{t[l]="0x"+r}),t}bytesToHex(e){return this.add0x(Array.from(e,t=>this.hexMaker(t)))}async appendToQueue(e,t){const r=this.bytesToHex(e);if(["connect","connection:start"].includes(t)){if(this.__internal__.serial.connected)return;await this.serialConnect();return}this.__internal__.serial.queue.push({bytes:r,action:t}),this.dispatch("internal:queue",{})}serialSetConnectionConstant(e=1){}serialMessage(e){}serialCorruptMessage(e,t){}clearSerialQueue(){this.__internal__.serial.queue=[]}sumHex(e){let t=0;return e.forEach(r=>{t+=parseInt(r,16)}),t.toString(16)}__emulate(e){if(typeof e.code!="object"){console.error("Invalid data to make an emulation");return}this.__internal__.serial.connected||(this.__internal__.serial.connected=!0,this.__internal__.interval.reconnection&&(clearInterval(this.__internal__.interval.reconnection),this.__internal__.interval.reconnection=0)),this.__internal__.timeout.until_response&&(clearTimeout(this.__internal__.timeout.until_response),this.__internal__.timeout.until_response=0),this.serialMessage(e.code)}toString(){return JSON.stringify({__class:this.typeDevice,device_number:this.deviceNumber,uuid:this.uuid,connected:this.isConnected,connection:this.__internal__.serial.bytes_connection})}softReload(){i(this,g,fe).call(this),this.dispatch("serial:soft-reload",{})}async sendConnect(){await this.appendToQueue(this.__internal__.serial.bytes_connection,"connect")}async sendCustomCode(e){await this.appendToQueue(e,"custom")}}g=new WeakSet,Y=async function(e){const t=this.__internal__.serial.port;if(!t)throw new Error("The port is closed.");const r=new Uint8Array(e),l=t.writable.getWriter();await l.write(r),l.releaseLock()},ie=function(e=[]){return e.map(t=>t.toString().toLowerCase())},W=function(e=[],t=null){e&&e.length>0?(this.__internal__.serial.connected=!0,this.__internal__.interval.reconnection&&(clearInterval(this.__internal__.interval.reconnection),this.__internal__.interval.reconnection=0),this.__internal__.timeout.until_response&&(clearTimeout(this.__internal__.timeout.until_response),this.__internal__.timeout.until_response=0),this.serialMessage(i(this,g,ie).call(this,e))):this.serialCorruptMessage(e,t),this.__internal__.serial.queue.length!==0&&this.dispatch("internal:queue",{})},se=async function(){const e=this.serialFilters,t=await navigator.serial.getPorts({filters:e});return e.length===0?t:t.filter(r=>{const l=r.getInfo();return e.some(f=>l.usbProductId===f.usbProductId&&l.usbVendorId===f.usbVendorId)})},ae=function(e){if(e!==void 0){const t=this.__internal__.serial.incoming;let r=new Uint8Array(t.length+e.byteLength);r.set(t,0),r.set(new Uint8Array(e),t.length),this.__internal__.serial.incoming=r}},le=async function(){const e=this.__internal__.serial.port;for(;e.readable&&this.__internal__.serial.keep_reading;){const t=e.readable.getReader();this.__internal__.serial.reader=t;try{let r=!0;for(;r;){const{value:l,done:f}=await t.read();if(f){t.releaseLock(),this.__internal__.serial.keep_reading=!1,r=!1;break}i(this,g,ae).call(this,l),this.__internal__.serial.time_until_send_bytes&&(clearTimeout(this.__internal__.serial.time_until_send_bytes),this.__internal__.serial.time_until_send_bytes=0),this.__internal__.serial.time_until_send_bytes=setTimeout(()=>{let _=[];for(const d in this.__internal__.serial.incoming)_.push(this.__internal__.serial.incoming[d].toString(16));this.__internal__.serial.incoming&&i(this,g,W).call(this,_),this.__internal__.serial.incoming=new Uint8Array(0)},400)}}catch(r){this.serialErrors(r)}finally{t.releaseLock()}}this.__internal__.serial.keep_reading=!0,await this.__internal__.serial.port.close()},oe=async function(){return typeof window>"u"?!1:"serial"in navigator&&"forget"in window.SerialPort.prototype?(await this.__internal__.serial.port.forget(),!0):!1},ce=function(){["serial:connected","serial:connecting","serial:reconnect","serial:timeout","serial:disconnected","serial:sent","serial:soft-reload","serial:message"].forEach(t=>{this.serialRegisterAvailableListener(t)})},ue=function(){this.on("internal:queue",async()=>{await i(this,g,de).call(this)})},de=async function(){if(!this.__internal__.serial.connected){await this.serialConnect();return}if(this.__internal__.timeout.until_response||this.__internal__.serial.queue.length===0)return;const e=this.__internal__.serial.queue[0];this.__internal__.timeout.until_response=setTimeout(async()=>{await this.timeout(e.bytes,e.action)},this.__internal__.time.response_general),this.dispatch("serial:sent",{action:e.action,bytes:e.bytes}),await i(this,g,Y).call(this,e.bytes),this.typeDevice==="relay"&&i(this,g,W).call(this,["DD","DD"],null);const t=[...this.__internal__.serial.queue];this.__internal__.serial.queue=t.splice(1)},he=function(e=1){this.__internal__.device_number=e,this.__internal__.serial.bytes_connection=this.serialSetConnectionConstant(e)},fe=function(){this.__internal__.last_error={message:null,handler:null,code:null,no_code:0}};const v=class v{static typeError(s){const e=new Error;throw e.message=`Type ${s} is not supported`,e.name="DeviceTypeError",e}static addCustom(s,e){typeof v.devices[s]>"u"&&(v.devices[s]=[]),v.add(e)}static add(s){const e=s.typeDevice,t=s.uuid;if(typeof v.devices[e]>"u")return v.typeError(e);if(!v.devices[e][t])return v.devices[e][t]=s,v.devices[e].indexOf(s)}static get(s,e){return typeof v.devices[s]>"u"?v.typeError(s):v.devices[s][e]}static getJofemarByUuid(s){return v.get("jofemar",s)}static getLockerByUuid(s){return v.get("locker",s)}static getRelayByUuid(s){return v.get("relay",s)}static getBoardroidByUuid(s){return v.get("boardroid",s)}static getAll(s=null){return s===null?v.devices:typeof v.devices[s]>"u"?v.typeError(s):v.devices[s]}static getJofemar(s=1){return Object.values(v.devices.jofemar).find(t=>t.deviceNumber===s)??null}static getBoardroid(s=1){return Object.values(v.devices.boardroid).find(t=>t.deviceNumber===s)??null}static getLocker(s=1){return Object.values(v.devices.locker).find(t=>t.deviceNumber===s)??null}static getRelay(s=1){return Object.values(v.devices.relay).find(t=>t.deviceNumber===s)??null}static getCustom(s,e=1){return typeof v.devices[s]>"u"?v.typeError(s):Object.values(v.devices[s]).find(r=>r.deviceNumber===e)??null}};B(v,"devices",{relay:[],locker:[],jofemar:[],boardroid:[]});let A=v;class Z extends P{constructor({filters:e=null,config_port:t=null,no_device:r=1}={}){super({filters:e,config_port:t,no_device:r});C(this,H);C(this,U,{activate:["A0","01","01","A2"],deactivate:["A0","01","00","A1"]});this.__internal__.device.type="relay",i(this,H,_e).call(this)}serialMessage(e){const t={code:e,name:null,description:null,request:null,no_code:0};switch(e[1].toString()){case"dd":t.name="Connection with the serial device completed.",t.description="Your connection with the serial device was successfully completed.",t.request="connect",t.no_code=100;break;case"de":break;default:t.name="Unrecognized response",t.description="The response of application was received, but dont identify with any of current parameters",t.request="undefined",t.no_code=400;break}this.dispatch("serial:message",t)}serialRelaySumHex(e){let t=0;return e.forEach((r,l)=>{l!==3&&(t+=parseInt(r,16))}),t.toString(16).toUpperCase()}serialSetConnectionConstant(e=1){const t=["A0","01","00","A1"];return t[1]=this.hexMaker(this.decToHex(e.toString())),t[3]=this.serialRelaySumHex(t),this.add0x(t)}async turnOn(){const e=y(this,U).activate;e[3]=this.serialRelaySumHex(e),await this.appendToQueue(e,"relay:turn-on")}async turnOff(){const e=y(this,U).deactivate;e[3]=this.serialRelaySumHex(e),await this.appendToQueue(e,"relay:turn-off")}async toggle(e=!1,t=300){const r=this;e?(await r.turnOff(),await $(t),await r.turnOn()):(await r.turnOn(),await $(t),await r.turnOff())}}U=new WeakMap,H=new WeakSet,_e=function(){A.add(this)};class ee extends P{constructor({filters:e=null,config_port:t=null,no_device:r=1}={}){super({filters:e,config_port:t,no_device:r});C(this,J);C(this,T,!1);C(this,F,0);this.__internal__.device.type="locker",i(this,J,pe).call(this)}serialMessage(e){const t={code:e,name:null,description:null,request:null,no_code:0};switch(e[1]){case"8":t.name="Connection with the serial device completed.",t.description="Your connection with the serial device was successfully completed.",t.request="connect",t.no_code=100;break;case"7":switch(e[4]){case"5":t.name="Cell inactive.",t.description="The selected cell is inactive or doesn't exist.",t.request="dispense",t.no_code=101,this.__internal__.dispense.status=!1,this.dispatch("not-dispensed",{}),y(this,T)&&y(this,F)>=89?(t.finished_test=!0,I(this,T,!1),I(this,F,0)):y(this,T)&&(t.finished_test=!1);break;case"4":default:t.name="Cell open.",t.description="The selected cell was open successfully.",t.request="dispense",t.no_code=102,this.__internal__.dispense.status=!0,this.dispatch("dispensed",{}),y(this,T)&&y(this,F)>=89?(t.finished_test=!0,I(this,T,!1),I(this,F,0)):y(this,T)&&(t.finished_test=!1);break}break;case"6":t.name="Configuration applied.",t.description="The configuration was successfully applied.",t.request="configure cell",t.no_code=103;break;default:t.request="undefined",t.name="Response unrecognized",t.description="The response of application was received, but dont identify with any of current parameters",t.no_code=400;break}this.dispatch("serial:message",t)}serialSetConnectionConstant(e=1){let t=["02","06","00","03","03","1D","F8","1B","03","F9"];return this.add0x(t)}}T=new WeakMap,F=new WeakMap,J=new WeakSet,pe=function(){A.add(this)};class te extends P{constructor({filters:e=null,config_port:t=null,no_device:r=1}={}){super({filters:e,config_port:t,no_device:r});C(this,q);this.__internal__.device.type="jofemar",i(this,q,me).call(this)}serialJofemarMakeBytes(e){let t=this.hexToDec(this.sumHex(e)),r=i(this,q,be).call(this,t.toString());for(let l=0;l<2;l++)e.push(this.hexMaker(r[l]));return e.push("03"),this.add0x(e)}serialSetConnectionConstant(e=1){let t=["02","30","30",(128+e).toString(16),"53","FF","FF"],r=[];return t.forEach(l=>{r.push(this.hexMaker(l))}),this.serialJofemarMakeBytes(r)}serialMessage(e){}}q=new WeakSet,me=function(){A.add(this)},be=function(e){e=this.add0x([this.decToHex(parseInt(e).toString())]);let t=[];return t.push((e&255|240).toString(16).toUpperCase()),t.push((e&255|15).toString(16).toUpperCase()),t};class re extends P{constructor({filters:e=null,config_port:t=null,no_device:r=1}={}){super({filters:e,config_port:t,no_device:r});C(this,V);B(this,"_recycler",{ict:!0,bill:1});this.__internal__.device.type="boardroid",i(this,V,ye).call(this)}serialBoardroidSumHex(e){let t=0;return e.forEach((r,l)=>{l!==0&&l!==11&&(t+=parseInt(r,16))}),t.toString(16).toUpperCase()}serialMessage(e){}serialSetConnectionConstant(e=1){let t=["F1","06","00","00","00","00","00","00","00","00","F2","F8"];return t[1]=this.hexMaker(this.decToHex((5+e).toString())),t[11]=this.serialBoardroidSumHex(t),this.add0x(t)}}V=new WeakSet,ye=function(){A.add(this)};const n=class n{static status(s=null){var t,r;if(!i(t=n,a,c).call(t,s))return!1;let e=[];switch(y(n,k)){case"locker":e=["0","8"];break;case"boardroid":e=["2",(5+y(n,D)).toString(16).toUpperCase()];break;case"jofemar":e=["6"];break;default:return!1}i(r=n,a,o).call(r,e)}static dispensed(s=null){var t,r;if(!i(t=n,a,c).call(t,s))return!1;let e=[];switch(y(n,k)){case"locker":e=["0","7","4","4","4"];break;case"boardroid":e=["2","D7","A","0","0","0","0","0","0","0","0","0","F2"];break;case"jofemar":e=["6","30"];break;default:return!1}i(r=n,a,o).call(r,e)}static notDispensed(s=null){var t,r;if(!i(t=n,a,c).call(t,s))return!1;let e=[];switch(y(n,k)){case"locker":e=["0","7","5","5","5"];break;case"boardroid":e=["2","D7","A","0","0","1","0","0","0","0","0","0","F2"];break;case"jofemar":e=["6","34"];break;default:return!1}i(r=n,a,o).call(r,e)}static gateInactive(s=null){var e;if(!i(e=n,a,c).call(e,s)||!i(this,a,G).call(this))return!1;i(this,a,o).call(this,["0","7","5","5","5"])}static gateConfigured(s=null){var e;if(!i(e=n,a,c).call(e,s)||!i(this,a,G).call(this))return!1;i(this,a,o).call(this,["0","6"])}static keyPressed(s=null){var l,f,_;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,p).call(f))return!1;const e=["30","31","32","33","34","35","36","37","38","39","2A","23","41","42","43","44"],t=(128+y(n,D)).toString(16),r=Math.floor(Math.random()*15);i(_=n,a,o).call(_,["2",t,"54",e[r]])}static doorOpened(s=null){var r,l;if(!i(r=n,a,c).call(r,s)||!i(this,a,Q).call(this))return!1;let e=[];const t=(128+y(n,D)).toString(16);switch(y(n,k)){case"boardroid":e=["2","D8","dc"];break;case"jofemar":e=["2",t,"50","4F"];break}i(l=n,a,o).call(l,e)}static doorClosed(s=null){var r,l;if(!i(r=n,a,c).call(r,s)||!i(this,a,Q).call(this))return!1;let e=[];const t=(128+y(n,D)).toString(16);switch(y(n,k)){case"boardroid":e=["2","D8","db"];break;case"jofemar":e=["2",t,"50","43"];break}i(l=n,a,o).call(l,e)}static channelDisconnected(s=null){var t,r,l;if(!i(t=n,a,c).call(t,s)||!i(r=n,a,p).call(r))return!1;const e=(128+y(n,D)).toString(16);i(l=n,a,o).call(l,["2",e,"43","43","43","FD"])}static channelConnected(s=null){var t,r,l;if(!i(t=n,a,c).call(t,s)||!i(r=n,a,p).call(r))return!1;const e=(128+y(n,D)).toString(16);i(l=n,a,o).call(l,["2",e,"43","43","43","FC"])}static channelEmpty(s=null){var t,r,l;if(!i(t=n,a,c).call(t,s)||!i(r=n,a,p).call(r))return!1;const e=(128+y(n,D)).toString(16);i(l=n,a,o).call(l,["2",e,"43","43","43","FF"])}static workingTemperature(s=null){var t,r,l;if(!i(t=n,a,c).call(t,s)||!i(r=n,a,p).call(r))return!1;const e=(128+y(n,D)).toString(16);i(l=n,a,o).call(l,["2",e,"43","54","16"])}static currentTemperature(s=null){var r,l,f;if(!i(r=n,a,c).call(r,s)||!i(l=n,a,Q).call(l))return!1;let e=[];const t=(128+y(n,D)).toString(16);switch(y(n,k)){case"boardroid":e=["2","D9","44","30"];break;case"jofemar":e=["2",t,"43","74","2B","30","39","2E","31","7F","43"];break}i(f=n,a,o).call(f,e)}static ready(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","30"])}static busy(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","31"])}static invalidTray(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","32"])}static invalidChannel(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","33"])}static emptyChannel(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","34"])}static elevatorJam(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","35"])}static elevatorMalfunction(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","36"])}static phototransistorFailure(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","37"])}static allChannelsEmpty(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","38"])}static productDetectorFailure(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","39"])}static displayDisconnected(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","41"])}static productUnderElevator(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","42"])}static elevatorSettingAlarm(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","43"])}static buttonPanelFailure(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","44"])}static errorWritingEeprom(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","45"])}static errorControlTemperature(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","46"])}static thermometerDisconnected(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","47"])}static thermometerMisconfigured(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","48"])}static thermometerFailure(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","49"])}static errorExtractorConsumption(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4A"])}static channelSearchError(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4B"])}static productExitMouthSearchError(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4C"])}static elevatorInteriorLocked(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4D"])}static productDetectorVerifierError(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4E"])}static waitingForProductRecall(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4F"])}static productExpiredByTemperature(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","50"])}static faultyAutomaticDoor(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","51"])}static rejectLever(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","A0","1"])}static resetCoinPurse(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","A0","2"])}static coinInsertedBox(s=null,e=null){var l,f,_,d;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,m).call(f))return!1;const t=["40","41","42","43","44","45"],r=i(_=n,a,K).call(_,t,e);i(d=n,a,o).call(d,["2","A0",r])}static coinInsertedTube(s=null,e=null){var l,f,_,d;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,m).call(f))return!1;const t=["50","51","52","53","54","55"],r=i(_=n,a,K).call(_,t,e);i(d=n,a,o).call(d,["2","A0",r])}static banknoteInsertedStacker(s=null,e=null){var l,f,_,d;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,m).call(f))return!1;const t=["80","81","82","83","84"],r=i(_=n,a,j).call(_,t,e);i(d=n,a,o).call(d,["2","B0",r])}static banknoteInsertedEscrow(s=null,e=null){var l,f,_,d;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,m).call(f))return!1;const t=["90","91","92","93","94"],r=i(_=n,a,j).call(_,t,e);i(d=n,a,o).call(d,["2","B0",r])}static banknoteEjected(s=null,e=null){var l,f,_,d;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,m).call(f))return!1;const t=["A0","A1","A2","A3","A4"],r=i(_=n,a,j).call(_,t,e);i(d=n,a,o).call(d,["2","B0",r])}static banknoteInsertedRecycler(s=null,e=null){var l,f,_,d;if(!i(l=n,a,c).call(l,s)||!i(f=n,a,m).call(f))return!1;const t=["B0","B1","B2","B3","B4"],r=i(_=n,a,j).call(_,t,e);i(d=n,a,o).call(d,["2","B0",r])}static banknoteTaken(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","B0","2a"])}static coinPurseEnabled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D0","1"])}static coinPurseDisabled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D0","0"])}static billPurseDisabled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D1","0","0"])}static billPurseEnabled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D1","1","1"])}static readTubes(s=null){var S,x,M;if(!i(S=n,a,c).call(S,s)||!i(x=n,a,m).call(x))return!1;const e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f"],[t,r,l,f,_,d]=[e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)]];i(M=n,a,o).call(M,["2","D2",t,r,l,f,_,d])}static readBillPurse(s=null,e=null){var r,l,f,_;if(!i(r=n,a,c).call(r,s)||!i(l=n,a,m).call(l))return!1;let t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c"];if(s._recycler.ict){const d=t[Math.floor(Math.random()*31)];let S="0",x="0",M="0",E="0",R="0";if(e!==null&&!isNaN(parseInt(e)))switch(e.toString()){case"20":S=d;break;case"50":x=d;break;case"100":M=d;break;case"200":E=d;break;case"500":R=d;break}else switch(s._recycler.bill){case 0:S=d;break;case 1:x=d;break;case 2:M=d;break;case 3:E=d;break;case 4:R=d;break}i(f=n,a,o).call(f,["2","D3",S,x,M,E,R,"0"])}else{const[d,S,x,M,E,R]=[t[Math.floor(Math.random()*30)],t[Math.floor(Math.random()*30)],t[Math.floor(Math.random()*30)],t[Math.floor(Math.random()*2)],t[Math.floor(Math.random())],t[Math.floor(Math.random())]];i(_=n,a,o).call(_,["2","D3",d,S,x,M,E,R])}}static banknoteAccepted(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D4","1"])}static banknoteRejected(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D4","0"])}static banknotesDispensed(s=null){var t,r,l,f;if(!i(t=n,a,c).call(t,s)||!i(r=n,a,m).call(r))return!1;let e=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c"];if(s._recycler.ict){const _=e[Math.floor(Math.random()*30)];let d="0",S="0",x="0",M="0",E="0";switch(s._recycler.bill){case 0:d=_;break;case 1:S=_;break;case 2:x=_;break;case 3:M=_;break;case 4:E=_;break}i(l=n,a,o).call(l,["2","D5",d,S,x,M,E,"0"])}else{const[_,d,S,x,M,E]=[e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*30)],e[Math.floor(Math.random()*2)],e[Math.floor(Math.random())],e[Math.floor(Math.random())]];i(f=n,a,o).call(f,["2","D5",_,d,S,x,M,E])}}static coinsDispensed(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","D6"])}static relayOn(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DA","1"])}static relayOff(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DA","0"])}static nayaxEnabled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","1"])}static nayaxDisabled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","0"])}static nayaxPreCreditAuthorized(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","3"])}static nayaxCancelRequest(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","4"])}static nayaxSellApproved(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","5"])}static nayaxSellDenied(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","6"])}static nayaxEndSession(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","7"])}static nayaxCancelled(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","8"])}static nayaxDispensed(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","A","0"])}static nayaxNotDispensed(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,m).call(t))return!1;i(r=n,a,o).call(r,["2","DD","A","1"])}static fullTray(s=null){var e,t,r;if(!i(e=n,a,c).call(e,s)||!i(t=n,a,p).call(t))return!1;i(r=n,a,o).call(r,["6","4F"])}};k=new WeakMap,D=new WeakMap,a=new WeakSet,ge=function(){if(n.enable===!1)throw new Error("Emulator is disabled");return n.enable},ve=function(s){if(typeof s!="object"||!(s instanceof P))throw new Error(`Type ${s.typeDevice} is not supported`);return n.instance=s,I(n,k,s.typeDevice),I(n,D,s.deviceNumber),!0},c=function(s=null){var e,t;return!i(e=n,a,ge).call(e)||s===null&&n.instance===null?!1:(n.instance===null&&i(t=n,a,ve).call(t,s),!0)},G=function(){if(y(n,k)!=="locker")throw new Error("This function is only available for Locker devices");return!0},m=function(){if(y(n,k)!=="boardroid")throw new Error("This function is only available for Boardroid devices");return!0},p=function(){if(y(n,k)!=="boardroid")throw new Error("This function is only available for Jofemar devices");return!0},Q=function(){if(y(n,k)==="locker")throw new Error("This function is not available for Locker devices");return!0},Be=function(){if(y(n,k)==="boardroid")throw new Error("This function is not available for Boardroid devices");return!0},Ie=function(){if(y(n,k)==="jofemar")throw new Error("This function is not available for Jofemar devices");return!0},o=function(s){n.instance.__emulate({code:s})},K=function(s,e=null){let t=s[Math.floor(Math.random()*5)];if(e!==null&&!isNaN(parseFloat(e)))switch(e.toString()){case"0.5":t=s[1];break;case"1":t=s[2];break;case"2":t=s[3];break;case"5":t=s[4];break;case"10":t=s[5];break}return t},j=function(s,e=null){let t=s[Math.floor(Math.random()*4)];if(e!==null&&!isNaN(parseFloat(e)))switch(e.toString()){case"20":t=s[0];break;case"50":t=s[1];break;case"100":t=s[2];break;case"200":t=s[3];break;case"500":t=s[4];break}return t},C(n,a),B(n,"enable",!1),B(n,"instance",null),C(n,k,null),C(n,D,1);let N=n;var Ee={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Te={Relay:Z,Locker:ee,Jofemar:te,Boardroid:re,Devices:A,Emulator:N,version:Ee.VITE_APP_VERSION};h.Boardroid=re,h.Devices=A,h.Emulator=N,h.Jofemar=te,h.Locker=ee,h.Relay=Z,h.Webserial=Te,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
